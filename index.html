<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Survei Mood</title>

<style>
body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #e3f2fd, #bbdefb);
  font-family: Arial, sans-serif;
}
.box {
  background: #fff;
  padding: 25px;
  border-radius: 14px;
  width: 100%;
  max-width: 420px;
  box-shadow: 0 10px 25px rgba(0,0,0,.2);
}
label { display:block; margin-top:12px; font-weight:bold; }
input, select, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.rating { margin-top: 8px; }
button {
  width: 100%;
  margin-top: 16px;
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #5c8fd6;
  color: #fff;
  font-size: 15px;
  cursor: pointer;
}
button:hover { background:#4a7fc5; }
#hasil {
  display:none;
  margin-top:15px;
  padding:12px;
  background:#f1f7fb;
  border-radius:8px;
  font-weight:bold;
}
.admin-btn { background:#607d8b; }
table {
  display:none;
  width:100%;
  margin-top:15px;
  border-collapse:collapse;
  font-size:13px;
}
th, td {
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
th { background:#eee; }
</style>
</head>

<body>

<div class="box">
  <h2 style="text-align:center;">ğŸ“ Survei Mood</h2>

  <label>Nama</label>
  <input type="text" id="nama">

  <label>Mood hari ini</label>
  <div class="rating">
    <input type="radio" name="mood" value="1">â­
    <input type="radio" name="mood" value="2">â­â­
    <input type="radio" name="mood" value="3">â­â­â­
    <input type="radio" name="mood" value="4">â­â­â­â­
    <input type="radio" name="mood" value="5" checked>â­â­â­â­â­
  </div>

  <label>Capek?</label>
  <select id="capek">
    <option>ğŸ§˜ Santai</option>
    <option>ğŸ˜®â€ğŸ’¨ Lumayan</option>
    <option>ğŸ¥µ Capek banget</option>
  </select>

  <label>Paling butuh</label>
  <select id="butuh">
    <option>â˜• Kopi</option>
    <option>ğŸ›Œ Tidur</option>
    <option>ğŸ§ Musik</option>
    <option>ğŸ–ï¸ Liburan</option>
    <option>ğŸ’° Gajian</option>
  </select>

  <label>Curhat</label>
  <textarea id="curhat" rows="3"></textarea>

  <!-- ğŸ”¥ WAJIB -->
  <button type="button" onclick="kirim()">Kirim Survei</button>

  <div id="hasil"></div>

  <button type="button" class="admin-btn" onclick="bukaAdmin()">ğŸ” Admin</button>

  <table id="tabelAdmin">
    <thead>
      <tr>
        <th>Nama</th>
        <th>Mood</th>
        <th>Capek</th>
        <th>Butuh</th>
        <th>Curhat</th>
      </tr>
    </thead>
    <tbody id="dataAdmin"></tbody>
  </table>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbytksPqs30TK6ltChrLbSVaaxxokKy9SBuRtcZB0kNGNVR5RkZkq6XDBuELFB8MWwuUYw/exec";
let data = JSON.parse(localStorage.getItem("survei")) || [];

function kirim() {
  let nama = document.getElementById("nama").value.trim();
  let moodEl = document.querySelector('input[name="mood"]:checked');
  let capek = document.getElementById("capek").value;
  let butuh = document.getElementById("butuh").value;
  let curhat = document.getElementById("curhat").value || "-";

  if (!nama || !moodEl) {
    alert("Nama dan mood wajib diisi");
    return;
  }

  let mood = moodEl.value;

  // kirim ke spreadsheet
  let fd = new FormData();
  fd.append("nama", nama);
  fd.append("mood", mood);
  fd.append("capek", capek);
  fd.append("butuh", butuh);
  fd.append("curhat", curhat);

  fetch(SCRIPT_URL, { method:"POST", body:fd })
    .then(() => {
      document.getElementById("hasil").innerText =
        "âœ… Terima kasih, survei terkirim!";
      document.getElementById("hasil").style.display = "block";
    })
    .catch(() => alert("âŒ Gagal kirim"));

  // simpan lokal admin
  data.push({ nama, mood, capek, butuh, curhat });
  localStorage.setItem("survei", JSON.stringify(data));

  document.getElementById("nama").value = "";
  document.getElementById("curhat").value = "";
}

function bukaAdmin() {
  let pass = prompt("Password admin:");
  if (pass !== "admin123") return alert("Password salah");

  let tbody = document.getElementById("dataAdmin");
  tbody.innerHTML = "";
  data.forEach(d => {
    tbody.innerHTML += `
      <tr>
        <td>${d.nama}</td>
        <td>${d.mood}</td>
        <td>${d.capek}</td>
        <td>${d.butuh}</td>
        <td>${d.curhat}</td>
      </tr>`;
  });

  document.getElementById("tabelAdmin").style.display = "table";
}
</script>

</body>
</html>
